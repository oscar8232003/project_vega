{%extends 'core/base.html'%}
{%block title%}{{local.nombre_local}}{%endblock%}
{%block content%}
<div class="container container-whithe shadow">
    <div class="row">
       <div class="col-12 m-0 p-0">
           {%if local.imagen_banner.url%}
           <img src="{{local.imagen_banner.url}}" alt="img_banner_tienda" class="img-fluid">
           {%else%}
           <img src="/media/vendedor/Mi_Tienda.webp" alt="img_banner_tienda" class="img-fluid">
           {%endif%}
       </div>
    </div>

    <div class="row justify-content-center">
        <!--TITULO-->
        <div class="col-12 text-center pt-3">
            <h2>{%if local.imagen_muestra%}
                {%if not 'sin_imagen.jpg' in local.imagen_muestra.url%}
                <img src="{{local.imagen_muestra.url}}" width="75px" class="rounded-circle" alt="img_tienda_muestra">
                {%endif%}
                {%endif%}
                Bienvenido a {{local.nombre_local}}</h2>
            <p>Tenemos una amplia variedad de productos disponibles para usted.</p>
            <hr>
        </div>
        <!--FIN TITULO-->
    </div>
    <div class="row justify-content-center">
        <!--UBICACION-->
        <div class="col-12 col-sm-10 pb-3">
            {%if dict_productos.valorizacion%}
            <button class="btn btn-success mb-3" type="button" disabled>
              <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                    <strong class="h5">Contamos con un servicio de
                    {%for x in x|rjust:dict_productos.valorizacion%}
                        <span class="icon-android-star"></span>
                    {%endfor%}
                    estrellas.</strong>
            </button>
            {%endif%}
            <h5 class="pb-2">-Nos ubicamos en</h5>
            <p>{{local.ubicacion_local}}</p>
        </div>
        <!--FIN UBICACION-->

        <!--Barras-->
        <div class="col-12 col-sm-10">
            <h5 class="pb-2">Contamos con</h5>
            <p class="m-0">
                <span class="badge badge-success"><strong>{{dict_productos.productos_vigentes}}</strong></span>
                Productos de diferentes categorias!</p>
            <div class="progress mb-3">
              <div class="progress-bar bg-success" role="progressbar" style="width: 100%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            </div>

            <p class="m-0">
                <span class="badge badge-primary"><strong>{{dict_productos.productos}}</strong></span>
                Productos a un buen precio!</p>
            <div class="progress mb-3">
              <div class="progress-bar bg-primary" role="progressbar" style="width: {{dict_productos.productos_porcentaje}}%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            </div>

            <p class="m-0">
                <span class="badge badge-danger"><strong>{{dict_productos.productos_oferta}}</strong></span>
                Productos en oferta!</p>
            <div class="progress mb-3">
              <div class="progress-bar bg-danger" role="progressbar" style="width: {{dict_productos.productos_oferta_porcentaje}}%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            </div>

            <a href="{%url 'cliente:listar_productos_tiendas' dict_productos.id%}" class="btn btn-info"><span class="icon-apple"></span> Ir a ver Productos</a>
            <hr>
        </div>
        <!--FIN Barras-->

        <!--SECCION DE OFERTAS-->
            <div class="col-12 col-sm-10">
                <h5 class="pb-3">Nuestras ofertas son</h5>
                <div class="col-12">
                    <p><strong>Ofertas Generales</strong></p>
                    {%if general%}
                        {%for oferta_general in general%}
                            <p><strong>
                                <div class="spinner-grow text-success" role="status">
                                <span class="sr-only">Loading...</span>
                                </div>  {{oferta_general.oferta}}
                            </strong></p>
                        {%endfor%}
                    {%else%}
                    <p>No hay ofertas actualmente para esta seccion</p>
                    {%endif%}
                    <hr>
                </div>
                <div class="col-12">
                    <p><strong>Ofertas de Temporadas</strong></p>
                    {%if temporada%}
                        {%for oferta_temporada in temporada%}
                            <p><div class="spinner-grow text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                            </div> {{oferta_temporada.oferta}}</p>
                        {%endfor%}
                    {%else%}
                        <p>No hay ofertas actualmente para esta seccion</p>
                    {%endif%}
                    <hr>
                </div>

                <div class="col-12">
                    <p><strong>Ofertas por rango de cliente</strong></p>
                    <p><strong>Clientes Diamante</strong></p>
                    {%if rango_diamante%}
                        {%for oferta_diamante in rango_diamante%}
                            <p>{{oferta_diamante.oferta}}</p>
                        {%endfor%}
                    {%else%}
                        <p>No hay ofertas actualmente para esta seccion</p>
                    {%endif%}

                    <p><strong>Clientes Oro</strong></p>
                    {%if rango_oro%}
                        {%for oferta_oro in rango_oro%}
                            <p>{{oferta_oro.oferta}}</p>
                        {%endfor%}
                    {%else%}
                        <p>No hay ofertas actualmente para esta seccion</p>
                    {%endif%}

                    <p><strong>Clientes Plata</strong></p>
                    {%if rango_plata%}
                        {%for oferta_plata in rango_plata%}
                            <p>{{oferta_plata.oferta}}</p>
                        {%endfor%}
                    {%else%}
                        <p>No hay ofertas actualmente para esta seccion</p>
                    {%endif%}
                    <hr>
                </div>
                <div class="col-12">
                    <p><strong>Ofertas convencionales</strong></p>
                    {%if convencional%}
                        {%for oferta_convencional in convencional%}
                            <p>{{oferta_convencional.oferta}}</p>
                        {%endfor%}
                    {%else%}
                        <p>No hay ofertas actualmente para esta seccion</p>
                    {%endif%}
                </div>
                <hr>
            </div>
        <!--FIN OFERTAS-->
        <!--Toast con comentarios-->
        <div class="col-12 d-flex flex-wrap">
            <div class="col-12 text-center pt-3 pb-3">
                <h4>Seccion de comentarios de los clientes</h4>
            </div>
            {%for x in valoraziones%}
                <div class="col-12 col-md-4 mb-md-0 mb-2">
                    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-autohide="false">
                      <div class="toast-header">
                        <svg class="bd-placeholder-img rounded mr-2" width="20" height="20" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img">
                            {%if x.puntuacion == 5%}
                            <rect width="100%" height="100%" fill="#28a745"></rect>
                            {%elif x.puntuacion == 4%}
                            <rect width="100%" height="100%" fill="#28a79c"></rect>
                            {%elif x.puntuacion == 3%}
                            <rect width="100%" height="100%" fill="#ffc107"></rect>
                            {%elif x.puntuacion == 2%}
                            <rect width="100%" height="100%" fill="#dc35d6"></rect>
                            {%elif x.puntuacion == 1%}
                            <rect width="100%" height="100%" fill="#dc3545"></rect>
                            {%endif%}
                        </svg>
                        <strong class="mr-auto">{{x.puntuacion}} <span class="icon-android-star"></span></strong>
                        <small>{{x.fecha_registro}}</small>
                        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="toast-body">
                          <h6 class="pb-2"><strong>{{x.user.first_name}}</strong></h6>
                          <p class="m-0">{{x.comentarios}}</p>
                      </div>
                    </div>
                </div>
            {%endfor%}
        </div>

        <div class="col-12 m-4">
            <a href="{%url 'cliente:listado_locales'%}" class="btn btn-secondary "><span data-icon="x"></span> Volver</a>
        </div>
        <!--FIN CONTENIDO-->
    </div>
</div>
{%endblock%}

